{
  "info": {
    "name": "Visual Testing Backend API",
    "description": "AI-Powered Visual Testing Platform - Complete API Collection",
    "version": "3.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string"
    },
    {
      "key": "projectId",
      "value": "",
      "type": "string"
    },
    {
      "key": "testId",
      "value": "",
      "type": "string"
    },
    {
      "key": "baselineId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        }
      }
    },
    {
      "name": "Projects",
      "item": [
        {
          "name": "Create Project",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('projectId', response.data.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Website\",\n  \"baseUrl\": \"https://example.com\",\n  \"diffThreshold\": 95,\n  \"aiEnabled\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/projects",
              "host": ["{{baseUrl}}"],
              "path": ["projects"]
            }
          }
        },
        {
          "name": "Get All Projects",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects",
              "host": ["{{baseUrl}}"],
              "path": ["projects"]
            }
          }
        }
      ]
    },
    {
      "name": "Baselines",
      "item": [
        {
          "name": "Create Baseline",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('baselineId', response.data.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": ""
                },
                {
                  "key": "projectId",
                  "value": "{{projectId}}",
                  "type": "text"
                },
                {
                  "key": "name",
                  "value": "homepage",
                  "type": "text"
                },
                {
                  "key": "viewport",
                  "value": "{\"width\": 1920, \"height\": 1080}",
                  "type": "text"
                },
                {
                  "key": "url",
                  "value": "https://example.com",
                  "type": "text"
                },
                {
                  "key": "tags",
                  "value": "[\"homepage\", \"desktop\"]",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/baselines",
              "host": ["{{baseUrl}}"],
              "path": ["baselines"]
            }
          }
        },
        {
          "name": "Get Project Baselines",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId}}/baselines",
              "host": ["{{baseUrl}}"],
              "path": ["projects", "{{projectId}}", "baselines"]
            }
          }
        }
      ]
    },
    {
      "name": "Hybrid AI Testing",
      "item": [
        {
          "name": "Run AI Visual Test",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 202) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('testId', response.data.testId);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectId\": \"{{projectId}}\",\n  \"url\": \"https://example.com\",\n  \"viewport\": {\n    \"width\": 1920,\n    \"height\": 1080\n  },\n  \"priority\": \"HIGH\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tests/run",
              "host": ["{{baseUrl}}"],
              "path": ["tests", "run"]
            }
          }
        },
        {
          "name": "Get AI Test Result",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tests/{{testId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tests", "{{testId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Pixel-Only Testing",
      "item": [
        {
          "name": "Pixel Compare with Baseline",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectId\": \"{{projectId}}\",\n  \"baselineId\": \"{{baselineId}}\",\n  \"currentImage\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==\",\n  \"threshold\": 0.1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/pixel/compare",
              "host": ["{{baseUrl}}"],
              "path": ["pixel", "compare"]
            }
          }
        },
        {
          "name": "Pixel Compare with URL Capture",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectId\": \"{{projectId}}\",\n  \"baselineId\": \"{{baselineId}}\",\n  \"url\": \"https://example.com\",\n  \"viewport\": {\n    \"width\": 1920,\n    \"height\": 1080\n  },\n  \"waitTime\": 2000,\n  \"threshold\": 0.1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/pixel/compare",
              "host": ["{{baseUrl}}"],
              "path": ["pixel", "compare"]
            }
          }
        },
        {
          "name": "Quick Pixel Compare",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"baselineImage\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==\",\n  \"currentImage\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwAEhAI/cMnrwwAAAABJRU5ErkJggg==\",\n  \"threshold\": 0.1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/pixel/quick-compare",
              "host": ["{{baseUrl}}"],
              "path": ["pixel", "quick-compare"]
            }
          }
        }
      ]
    },
    {
      "name": "AI Provider Testing",
      "item": [
        {
          "name": "OpenAI Visual Test",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectId\": \"{{projectId}}\",\n  \"url\": \"https://the-internet.herokuapp.com/disappearing_elements\",\n  \"viewport\": {\n    \"width\": 1920,\n    \"height\": 1080\n  },\n  \"priority\": \"HIGH\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tests/run",
              "host": ["{{baseUrl}}"],
              "path": ["tests", "run"]
            }
          }
        },
        {
          "name": "Groq Visual Test",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectId\": \"{{projectId}}\",\n  \"url\": \"https://httpbin.org/html\",\n  \"viewport\": {\n    \"width\": 1366,\n    \"height\": 768\n  },\n  \"priority\": \"NORMAL\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tests/run",
              "host": ["{{baseUrl}}"],
              "path": ["tests", "run"]
            }
          }
        }
      ]
    },
    {
      "name": "Queue Management",
      "item": [
        {
          "name": "Get Queue Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/queue/status",
              "host": ["{{baseUrl}}"],
              "path": ["queue", "status"]
            }
          }
        }
      ]
    },
    {
      "name": "Utilities",
      "item": [
        {
          "name": "Convert Image to Base64",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/utils/image-to-base64",
              "host": ["{{baseUrl}}"],
              "path": ["utils", "image-to-base64"]
            }
          }
        }
      ]
    }
  ]
}